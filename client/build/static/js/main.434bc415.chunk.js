(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{36:function(e,t,n){},46:function(e,t,n){},55:function(e,t,n){e.exports=n(98)},60:function(e,t,n){},61:function(e,t,n){},66:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},96:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(27),o=n.n(c),l=(n(60),n(61),n(2)),i=["DRIVERS_VIEW","SCHEDULE_VIEW","REPORT_VIEW"],u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=["All","Anna","Bob","Chris"],d=["DROP OFF","PICK UP","MISC"],m=[2,4,7,14,28],E={"0-3-19":{date:"0-3-19",description:"PICK UP",driver:"Bob"},"0-6-12":{date:"0-6-12",description:"MISC",driver:"Anna"},"0-5-8":{date:"0-5-8",description:"PICK UP",driver:"Anna"},"0-4-7":{date:"0-4-7",description:"PICK UP",driver:"Bob"},"0-0-0":{date:"0-0-0",description:"PICK UP",driver:"Chris"}},v=(n(66),n(67),n(4)),f=(n(36),function(e){return u[parseInt(e)]}),p=function(e){var t=e.week,n=e.day,a=e.hour;return"".concat(t,"-").concat(n,"-").concat(a)},b=function(e){var t=parseInt(e);return 0===t?"12:00 AM":12===t?"12:00 PM":t<12?"".concat(t,":00 AM"):"".concat(t-12,":00 PM")},h=function(e){if(e){var t=e.split("-"),n=Object(v.a)(t,3),a=n[0],r=n[1],c=n[2];return"Week ".concat(a,": ").concat(f(r),", ").concat(b(c))}},_=function(e){var t=e.split("-"),n=Object(v.a)(t,2),a=n[0],r=n[1],c=7*parseInt(a)+parseInt(r);return"Day ".concat(c)},O=function(e){var t=e.day,n=e.hour,a=-1===t&&r.a.createElement("div",{className:"small-text Slot__row-header corner".concat(t).concat(n)},b(n)),c=-1===n&&r.a.createElement("div",{className:"medium-text Slot__column-header corner".concat(t).concat(n)},f(t));return r.a.createElement("div",{className:"fixed-header".concat(n," Slot__container wkDay").concat(t," corner").concat(t).concat(n)},a&&a,c&&c)},g={Anna:{name:"Anna",color:"#e7087f",availability:{0:[9,10,12,15,16,17],2:[9,10,12,15,16,17],4:[9,10,12,15,16,17],6:[9,10,12,15,16,17]}},Bob:{name:"Bob",color:"#101cc1",availability:{0:[10,12,13,14,15],1:[10,12,13,14,15],3:[10,12,13,14,15]}},Chris:{name:"Chris",color:"#0eec67",availability:{1:[6,7,8,9,16,17,18,19,20,21],2:[6,7,8,9,16,17,18,19,20,21],3:[6,7,8,9,16,17,18,19,20,21],5:[6,7,8,9,16,17,18,19,20,21],6:[6,7,8,9,16,17,18,19,20,21]}}},y=function(e,t){return t(g[e])},D=function(e){var t=Object(a.useState)(null),n=Object(v.a)(t,2),c=n[0],o=n[1],l=function(e,t){return!!c&&!(!c[e]||!c[e].includes(t))};return{renderSlots:function(){for(var e=[],t=-1;t<7;t++)for(var n=-1;n<24;n++){var a=l(t,n);-1===t||-1===n?e.push(r.a.createElement(O,{key:"".concat(t,"-").concat(n,"-slots"),day:t,hour:n})):e.push(r.a.createElement(Y,{bookableDay:a,key:"".concat(t,"-").concat(n,"-slots"),day:t,hour:n}))}return e},handleGetDriverAvailability:function(){y(e.driver,(function(e){if(!e)return o(null);console.log("Driver availability",e.availability),o(e.availability)}))}}},S=function(){var e=Object(l.c)((function(e){return e})),t=D(e);return Object(a.useEffect)((function(){t.handleGetDriverAvailability()}),[e.driver]),r.a.createElement("div",null,r.a.createElement("div",{className:"Timetable__slots-container"},t.renderSlots(e.driver)))},k=n(50),w=s[0],T=function(e){var t=e&&e!==w?N(e):E;return{isBooked:function(e){return t[e]}}},R=T(),j=function(e,t){console.log("Creating entry...");var n=e.date,a=e.description,r=e.driver;if(!n)return t(null,{errMsg:"DATE_REQUIRED"});if(!r)return t(null,{errMsg:"DRIVER_REQUIRED"});if(!a)return t(null,{errMsg:"DESCRIPTION_REQUIRED"});var c=R.isBooked(n);if(c)return console.error("TIMESLOT_CONFLICT",c),t(null,{errMsg:"TIMESLOT_CONFLICT",payload:c,bookingAttempt:e});E[n]=e,t({msg:"ENTRY_CREATE_200",data:e})},N=function(e){var t={};for(var n in E){var a=E[n];a.driver===e&&(t[n]=a)}return t},C=function(e,t){console.log("Editing entry...");var n=e.date;e.description,e.driver;E[n]=e,t({msg:"ENTRY_UPDATE_200",data:e})},I=(n(68),n(8)),A=n.n(I),L=function(e){var t=e.setFormOpen,n=e.formOpen,c=e.bookedData,o=e.setBookedData,i=e.isVisible,u=Object(a.useState)(!1),s=Object(v.a)(u,2),d=s[0],m=s[1],f=Object(l.c)((function(e){return e}));Object(a.useEffect)((function(){return m(!1)}),[f.date.week]);var p=function(e){e&&e.preventDefault(),t((function(e){return!e}))},b=function(e){e&&e.preventDefault(),t(!1),m(!d)},h=A()("SlotControllers__btn-container",{isVisible:i});return r.a.createElement("div",null,!n&&!c&&r.a.createElement(k.a,{className:"show-btn-on-hover ".concat(h),onClick:p},"\u2795"),c&&!d&&r.a.createElement("div",{className:"SlotControllers__btn-container ".concat(h)},r.a.createElement(k.a,{onClick:p},"edit"),r.a.createElement(k.a,{color:"danger",onClick:b},"delete")),d&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"SlotControllers__warning-prompt"},"Are you sure?"),r.a.createElement("div",{className:"SlotControllers__btn-container ".concat(h)},r.a.createElement(k.a,{color:"danger",onClick:function(e){var t,n;e.preventDefault(),t=c.date,n=function(){console.log("ENTRY_DELETE_200"),o(null),b()},console.log("Deleting entry..."),delete E[t],n(null)}},"delete"),r.a.createElement(k.a,{color:"primary",onClick:b},"cancel"))))},M=(n(69),function(e){e.dateObj;var t=e.bookedData,n=Object(a.useState)(null),c=Object(v.a)(n,2),o=c[0],i=c[1],u=Object(l.c)((function(e){return e})).viewFilters;u.showBookableSlots,u.showOutsideAvailability;Object(a.useEffect)((function(){t&&y(t.driver,(function(e){i(e)}))}),[t]);var s=o&&{position:"absolute",top:10,right:10,display:"inline-block",background:o.color,height:30,width:30};return r.a.createElement("div",null,t&&o&&r.a.createElement("div",{className:"SlotView__data-container"},r.a.createElement("span",null,"Driver"),r.a.createElement("div",null,t.driver,r.a.createElement("div",{style:s})),r.a.createElement("span",null,"Description"),r.a.createElement("div",null,t.description)))}),F=(n(70),function(e){return{type:"SET_ERROR",payload:e}}),V=function(e,t,n){var a=function(t){console.error(t),e(F({errMsg:t,payload:null}))};return{renderDriverDropdown:function(){var e=s.map((function(e,t){return 0===t?void 0:r.a.createElement("option",{className:"EntryForm__option",key:"".concat(e,"-dropdown"),value:e},e)}));return r.a.createElement("select",{className:"EntryForm__select",value:t.driver||"DEFAULT",name:"driver",onChange:n},r.a.createElement("option",{value:"DEFAULT",disabled:!0,hidden:!0},"Choose driver"),e)},renderDescriptionDropdown:function(){var e=d.map((function(e){return r.a.createElement("option",{className:"EntryForm__option",key:"".concat(e,"-dropdown"),value:e},e)}));return r.a.createElement("select",{className:"EntryForm__select",value:t.description||"DEFAULT",name:"description",onChange:n},r.a.createElement("option",{value:"DEFAULT",disabled:!0,hidden:!0},"Choose description"),e)},handleEmptyValue:a,handleValidation:function(e){return t.driver?t.description?void e():a("DESCRIPTION_REQUIRED"):a("DRIVER_REQUIRED")}}},P=n(20),U=n(5),W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Object(a.useState)(e),r=Object(v.a)(n,2),c=r[0],o=r[1],l=function(e){e.preventDefault(),t()},i=function(){var e={};for(var t in c)e[t]="";o(e)},u=function(e){e.persist();var t=e.target,n=t.name,a=t.value;o((function(e){return Object(U.a)(Object(U.a)({},e),{},Object(P.a)({},n,a))}))};return[c,u,l,i]},B=function(e){if(!e)return console.error("INVALID_ENTRY_OBJ");var t=e.date,n=e.description,a=e.driver;return t&&n&&a?t?n?a?{date:t,description:n,driver:a}:console.error("DRIVER_REQUIRED"):console.error("DESCRIPTION_REQUIRED"):console.error("DATE_REQUIRED"):console.error("INVALID_ENTRY_OBJ")},x=function(e){var t=e.handleEntrySuccess,n=e.bookedData,a=e.setFormOpen,c=e.dateObj,o=W(n&&n,(function(){E.handleValidation((function(){var e=B({date:p(c),driver:u.driver,description:u.description});if(n)return C(e,t);j(e,t)}))})),i=Object(v.a)(o,4),u=i[0],s=i[1],d=i[2],m=(i[3],Object(l.b)()),E=V(m,u,s);return r.a.createElement("div",{className:"EntryForm__container"},r.a.createElement(k.a,{className:"EntryForm__close-btn",onClick:function(e){e.preventDefault(),a(!1)},close:!0}),r.a.createElement("form",{className:"EntryForm__form",onSubmit:d},r.a.createElement("div",{className:"SlotView__data-container"},r.a.createElement("span",null,"Driver"),E.renderDriverDropdown(),r.a.createElement("span",null,"Description"),E.renderDescriptionDropdown()),r.a.createElement(k.a,{color:"success",type:"submit"},"submit")))},H=function(e){return{type:"SET_DRIVER",payload:e}},K=function(e,t,n){var a=T(n.driver);return{handleStyling:function(e){var n=p(t);e(a.isBooked(n))},handleSlotClick:function(){p(n.date)!==p(t)&&e(function(e){return{type:"UPDATE_DATE",payload:e}}(t))}}},Y=function(e){var t=e.day,n=e.hour,c=e.bookableDay,o=Object(a.useState)(null),i=Object(v.a)(o,2),u=i[0],d=i[1],m=Object(a.useState)(!1),E=Object(v.a)(m,2),f=E[0],p=E[1],b=Object(a.useState)(!1),h=Object(v.a)(b,2),_=h[0],O=h[1],g=Object(l.b)(),y=Object(l.c)((function(e){return e})),D=y.viewFilters,S=D.showBookableSlots,k=D.showOutsideAvailability,w={week:y.date.week,day:t,hour:n},T=K(g,w,y);Object(a.useEffect)((function(){return T.handleStyling((function(e){return d(e)})),function(){p(!1)}}),[y.date.week,y.driver]);var R=A()({booked:u,bookableDay:S&&c,outsideAvailability:k&&u&&!c}),j=function(e){g(F(e))};return r.a.createElement("div",{onMouseEnter:function(){return O(!0)},onMouseLeave:function(){return O(!1)},onClick:T.handleSlotClick,className:"Slot__container wkDay".concat(t," ").concat(R)},!f&&r.a.createElement(M,{dateObj:w,bookedData:u}),!f&&r.a.createElement(L,{isVisible:_,setFormOpen:p,formOpen:f,bookedData:u,setBookedData:d}),f&&r.a.createElement(x,{dateObj:w,setFormOpen:p,bookedData:u,handleEntrySuccess:function(e,t){if(t)return j(t);console.log(e.msg),d(e.data),p(!1),y.driver!==s[0]&&g(H(e.data.driver))}}))},G=(n(71),n(100)),Q=n(107),X=n(106),J=n(99),q=function(e,t,n){var a=n.viewFilters,c=a.showBookableSlots,o=a.showOutsideAvailability,l=function(e){switch(e.preventDefault(),e.target.innerHTML){case"\u21e6":if(n.date.week<=0)return;return t({type:"PREV_WEEK"});case"\u21e8":if(n.date.week>=51)return;return t({type:"NEXT_WEEK"})}},i=function(e){t({type:"TOGGLE_FILTER_ELEMENT",element:e.target.name})},u=function(e){var n=e.target.innerHTML;t(H(n))};return{toggleDropdown:function(){e((function(e){return Object(U.a)(Object(U.a)({},e),{},{dropdownOpen:!e.dropdownOpen})}))},renderDropdownItems:function(){return s.map((function(e,t){return 0===t?r.a.createElement("div",{key:"".concat(e,"-app")},r.a.createElement(J.a,{onClick:u},e),r.a.createElement(J.a,{divider:!0})):r.a.createElement(J.a,{key:"".concat(e,"-").concat(t),onClick:u},e)}))},renderWeekNavBtns:function(){return["\u21e6","\u21e8"].map((function(e){return r.a.createElement("button",{className:"Controllers__week-nav-btn ".concat(e),key:"".concat(e,"-nav"),onClick:l},e)}))},renderFilterCheckboxes:function(e){return r.a.createElement("div",{className:"Controllers__filter-checkboxes-container"},e!==s[0]&&r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"checkbox",checked:c,onChange:i,name:"showBookableSlots"}),r.a.createElement("label",{htmlFor:"showBookableSlots"},"Show timeslots within driver availability")),r.a.createElement("input",{type:"checkbox",checked:o,onChange:i,name:"showOutsideAvailability"}),r.a.createElement("label",{htmlFor:"showOutsideAvailability"},"Show bookings outside driver availability"))}}},z=function(){var e=Object(a.useState)({dropdownOpen:!1}),t=Object(v.a)(e,2),n=t[0],c=t[1],o=Object(l.b)(),i=Object(l.c)((function(e){return e})),u=q(c,o,i);return r.a.createElement("div",{className:"Controllers__container"},r.a.createElement("div",null,r.a.createElement("div",{className:"Controllers__button-dropdown"},r.a.createElement("span",{className:"small-text"},"View Driver"),r.a.createElement(G.a,{isOpen:n.dropdownOpen,toggle:u.toggleDropdown},r.a.createElement(Q.a,{caret:!0},i.driver),r.a.createElement(X.a,null,u.renderDropdownItems())))),r.a.createElement("div",null,r.a.createElement("div",{className:"Controllers__week-nav-container"},u.renderWeekNavBtns(),r.a.createElement("span",{className:"Controllers__week-span medium-text"},"Week ",i.date.week))),r.a.createElement("div",null,u.renderFilterCheckboxes(i.driver)))},Z=(n(85),function(e,t){var n=function(){e({type:"RESET_ERROR"})};return{renderConflictingBooking:function(){var e=t.payload,n=e.date,a=e.description,c=e.driver,o=n.split("-"),l=Object(v.a)(o,3),i={week:l[0],day:l[1],hour:l[2]};return r.a.createElement("div",{className:"ErrorPrompt__conflict-msg-container"},r.a.createElement("span",{className:"span-emphasis"},function(e){return h(p(e))}(i)),r.a.createElement("span",null," timeslot is booked by "),r.a.createElement("span",{className:"span-emphasis"},c.toUpperCase()),r.a.createElement("span",null," for "),r.a.createElement("span",{className:"span-emphasis"},a))},handleDismiss:n,handleOverwrite:function(){var a=B(t.bookingAttempt);C(a,(function(){console.log("ENTRY_OVERWRITE_200"),e(H(s[0])),n()}))}}}),$=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.error})),n=Z(e,t);return r.a.createElement("div",{className:"ErrorPrompt__container"},r.a.createElement(k.a,{className:"ErrorPrompt__dismiss-btn",close:!0,onClick:n.handleDismiss}),r.a.createElement("span",{className:"ErrorPrompt__header"},t.errMsg),"TIMESLOT_CONFLICT"===t.errMsg&&r.a.createElement(r.a.Fragment,null,n.renderConflictingBooking(),r.a.createElement(k.a,{color:"danger",onClick:n.handleOverwrite},"overwrite")),"TIMESLOT_CONFLICT"===t.errMsg&&r.a.createElement(ce,null))};n(86);var ee=function(){var e=Object(l.c)((function(e){return e})),t=Object(l.b)();Object(a.useEffect)((function(){n()}),[e.appView]);var n=function(){t({type:"RESET_ERROR"})},c={left:e.slideInToggled&&"var(--slide-in-width)"};return r.a.createElement("div",{className:"AppView__container"},e.error.errMsg&&r.a.createElement($,null),e.error.errMsg&&r.a.createElement("div",{onClick:n,style:c,className:"App__error-dismiss-area"}))},te=(n(87),{aheadDate:function(e,t,n){var a,r=e.split("-").map((function(e){return parseInt(e)})),c=Object(v.a)(r,3),o=c[0],l=c[1],i=c[2];switch(t){case"WEEK_SELECTOR":if(o+n>=52)return null;a="".concat(o+n,"-").concat(l,"-").concat(i);break;case"DAY_SELECTOR":if(l+n>=7)return null;a="".concat(o,"-").concat(l+n,"-").concat(i);break;case"HOUR_SELECTOR":if(i+n>=24)return null;a="".concat(o,"-").concat(l,"-").concat(i+n)}return a},behindDate:function(e,t,n){var a,r=e.split("-").map((function(e){return parseInt(e)})),c=Object(v.a)(r,3),o=c[0],l=c[1],i=c[2];switch(t){case"WEEK_SELECTOR":if(o-n<0)return null;a="".concat(o-n,"-").concat(l,"-").concat(i);break;case"DAY_SELECTOR":if(l-n<0)return null;a="".concat(o,"-").concat(l-n,"-").concat(i);break;case"HOUR_SELECTOR":if(i-n<0)return null;a="".concat(o,"-").concat(l,"-").concat(i-n)}return a},setBreaker:function(e){switch(e){case"WEEK_SELECTOR":return 52;case"DAY_SELECTOR":return 7;case"HOUR_SELECTOR":return 24}}}),ne=function(e,t,n,a){var c=t.date,o=p(c),l=Object.keys(E);return{calcWithinHour:function(){var e=24,t=1;return["ahead","behind"].map((function(n){var a;switch(n){case"ahead":for(a=te.aheadDate(o,"HOUR_SELECTOR",t);l.includes(a)&&(a=te.aheadDate(o,"HOUR_SELECTOR",t),t++,0!==--e););return t=1,a;case"behind":for(a=te.behindDate(o,"HOUR_SELECTOR",t);l.includes(a)&&(a=te.behindDate(o,"HOUR_SELECTOR",t),t++,0!==--e););return t=1,a}}))},generateSuggestions:function(e){var t=te.setBreaker(e),n=1;return["behind","ahead"].map((function(a){var r;switch(a){case"ahead":for(r=te.aheadDate(o,e,n);l.includes(r)&&(r=te.aheadDate(o,e,n),n++,0!==--t););return n=1,r;case"behind":for(r=te.behindDate(o,e,n);l.includes(r)&&(r=te.behindDate(o,e,n),n++,0!==--t););return n=1,r}}))},handleSuggestionSubmit:function(a){var r=n.selectedSuggestion;a.preventDefault();var c=t.error.bookingAttempt.description,o=t.error.bookingAttempt.driver,l=B({date:r,description:c,driver:o});j(l,(function(t,n){if(n)return console.error(n.errMsg);console.log(t.msg),e(H(s[0])),e({type:"RESET_ERROR"})}))},renderSuggestions:function(e){return e.map((function(e){if(e)return r.a.createElement(J.a,{onClick:function(){return t=e,void a((function(e){return Object(U.a)(Object(U.a)({},e),{},{selectedSuggestion:t})}));var t},key:"".concat(e,"-suggestion")},h(e))}))}}},ae=n(51),re=function(e){var t=e.suggestions,n=t.withinDay,c=t.withinWeek,o=t.differentWeek,i=Object(a.useState)({dropdownOpen:!1,selectedSuggestion:""}),u=Object(v.a)(i,2),s=u[0],d=u[1],m=Object(l.c)((function(e){return e})),E=Object(l.b)(),f=ne(E,m,s,d);return r.a.createElement("section",{className:"Suggestions__container"},r.a.createElement(ae.a,{isOpen:s.dropdownOpen,toggle:function(){d((function(e){return Object(U.a)(Object(U.a)({},e),{},{dropdownOpen:!e.dropdownOpen})}))}},r.a.createElement(Q.a,{caret:!0},s.selectedSuggestion?h(s.selectedSuggestion):"Choose available timeslot"),r.a.createElement(X.a,null,r.a.createElement(J.a,{header:!0},"Within the same day:"),f.renderSuggestions(n),r.a.createElement(J.a,{divider:!0}),r.a.createElement(J.a,{header:!0},"Within the same week;"),f.renderSuggestions(c),r.a.createElement(J.a,{divider:!0}),r.a.createElement(J.a,{header:!0},"Different week:"),f.renderSuggestions(o))),r.a.createElement(k.a,{color:"primary",onClick:f.handleSuggestionSubmit},"submit"))},ce=function(){var e=Object(a.useState)([]),t=Object(v.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),i=Object(v.a)(o,2),u=i[0],s=i[1],d=Object(a.useState)([]),m=Object(v.a)(d,2),E=m[0],f=m[1],p={withinDay:n,withinWeek:u,differentWeek:E},b=Object(l.b)(),h=Object(l.c)((function(e){return e})),_=ne(b,h);return Object(a.useEffect)((function(){c(_.generateSuggestions("HOUR_SELECTOR")),s(_.generateSuggestions("DAY_SELECTOR")),f(_.generateSuggestions("WEEK_SELECTOR"))}),[]),r.a.createElement("div",null,r.a.createElement("p",null,"How about these nearby timeslots?"),r.a.createElement(re,{suggestions:p}))},oe=(n(46),function(e,t){var n=function(n){t.APP_VIEWS!==n&&e({type:"SET_APP_VIEW",payload:n})};return{handleChangeView:n,renderNavItems:function(){return i.map((function(e){var a=t.appView===e&&"Nav__current-view";return r.a.createElement("li",{key:"".concat(e,"-nav-li"),className:"medium-text ".concat(a),onClick:function(){return n(e)}},e)}))},handleToggleSlideIn:function(){e({type:"TOGGLE_SLIDE_IN"})}}}),le=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e})),n=oe(e,t);return r.a.createElement("div",{className:"Nav__slide-in"},r.a.createElement("ul",{className:"Nav__slide-in-ul"},n.renderNavItems()))},ie=function(){var e=Object(l.c)((function(e){return e})),t=Object(l.b)(),n=oe(t);return r.a.createElement("div",null,r.a.createElement("div",{className:"Nav__navbar"},r.a.createElement("button",{onClick:n.handleToggleSlideIn,className:"Nav__toggle-btn"},r.a.createElement("div",{className:"Nav__toggle-btn-bar"})),r.a.createElement("div",{className:"Nav__site-logo large-text"},"Truck Dispatcher App")),e.slideInToggled&&r.a.createElement(le,null))},ue=function(){var e=Object(a.useState)(!1),t=Object(v.a)(e,2),n=t[0],c=t[1],o=Object(l.c)((function(e){return e})),i=Object(l.b)(),u=function(e){var t=e.target.innerText;t!==o.driver&&i(H(t))},d=s.map((function(e,t){return 0===t?void 0:r.a.createElement(J.a,{key:"".concat(e,"-").concat(t,"-ddDropdown"),onClick:u},e)})),m=o.driver===s[0]?"Select":o.driver;return r.a.createElement("section",null,r.a.createElement(ae.a,{isOpen:n,toggle:function(){return c((function(e){return!e}))}},r.a.createElement(Q.a,{caret:!0},m),r.a.createElement(X.a,null,d)))},se=function(e,t){var n=Object(a.useState)(!1),c=Object(v.a)(n,2),o=c[0],l=c[1],i=function(){return l((function(e){return!e}))},u=function(t){t.persist(),e(H(t.target.innerHTML))};return{handleExpandInfo:u,renderDriversList:function(){var e=s.map((function(e,t){return 0===t?void 0:r.a.createElement(J.a,{key:"".concat(e,"-").concat(t,"-driverList"),onClick:u},e)})),n=t.driver===s[0]?"Drivers":t.driver;return r.a.createElement(ae.a,{isOpen:o,toggle:i},r.a.createElement(Q.a,{caret:!0},n),r.a.createElement(X.a,null,e))}}},de=(n(88),function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e})),n=se(e,t);return r.a.createElement("div",null,r.a.createElement("div",{className:"DriversList__dropdown-container"},r.a.createElement("span",null,"Driver:"),n.renderDriversList()))}),me=function(e){var t=e.handlers;return r.a.createElement("div",{className:"DriverInfo__btns-container"},!t.editMode&&r.a.createElement(k.a,{onClick:t.handleToggleEditMode,color:"primary",className:"DriverInfo__edit-btn"},"edit"),t.editMode&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{color:"success",onClick:t.handleUpdateDB,className:"DriverInfo__edit-btn"},"done")))},Ee=n(101),ve=function(e){return{type:"SET_EDIT_MODE",payload:e}},fe=function(e){var t=e.driverData,n=(e.setDriverData,t.availability),a=function(e,t){var n=e[0],a=e[e.length-1];return[n,a].map((function(e,t){return r.a.createElement("th",{key:"".concat(e+t,"-start-end")},b(e))}))};return{renderRows:function(){return u.map((function(t,c){var o=c%2===1?"positive_tr":"negative_tr",l=n[c];return l?0===l.length?r.a.createElement("tr",{key:"".concat(t,"-").concat(c,"-tr"),onClick:e.handleToggleEditMode,className:o},r.a.createElement("th",null,t),r.a.createElement("th",null,"-"),r.a.createElement("th",null,"-")):function(e){var t=e.sort((function(e,t){return e-t})),n=[],a=[t[0]],r=t[0];return t.forEach((function(t,c){0!==c&&(t-1===r?a.push(t):(n.push(a),(a=[]).push(t)),r=t,c===e.length-1&&n.push(a))})),n}(l).map((function(e,n){return 0===n?r.a.createElement("tr",{key:"".concat(t,"day-").concat(n,"grouping"),className:o},r.a.createElement("th",null,t),a(e)):r.a.createElement("tr",{key:"".concat(t,"day-").concat(n,"grouping"),className:o},r.a.createElement("th",null),a(e))})):r.a.createElement("tr",{key:"".concat(t,"-").concat(c,"-tr"),className:o},r.a.createElement("th",null,t),r.a.createElement("th",null,"-"),r.a.createElement("th",null,"-"))}))}}};n(89),n(90);var pe=n(104),be=n(16),he=n(102),_e=n(103),Oe=function(e){var t=e.handlers,n=e.hour,c=e.dayIndex,o=Object(a.useState)(!1),l=Object(v.a)(o,2),i=l[0],u=l[1];Object(a.useEffect)((function(){if(!t.driverData.availability[c])return u(!1);t.driverData.availability[c].includes(n)?u(!0):u(!1)}),[t.driverData.availability[c]]);return r.a.createElement(he.a,{className:"EditAvailability__form-group"},r.a.createElement(Ee.a,{onChange:function(){t.setDriverData((function(e){var t=e.availability,a=t,r=t[c]?Object(be.a)(t[c]):[];return r.includes(n)?(console.log("Adding to cache...",r),r=function(e,t){var n=e,a=e.indexOf(t);return~a&&n.splice(a,1),n}(r,n)):(console.log("Removing from cache..."),r.push(n)),a[c]=r,Object(U.a)(Object(U.a)({},e),{},{availability:a})}))},value:n,type:"checkbox",checked:i}),r.a.createElement(_e.a,null,"".concat(function(e){var t=parseInt(e);return 0===t?"12am":12===t?"12pm":t<12?"".concat(t,"am"):"".concat(t-12,"pm")}(n))))},ge=function(e){var t=e.handlers,n=u.map((function(e,n){return r.a.createElement("div",{key:"".concat(e,"-options-container")},r.a.createElement("h3",null,e),r.a.createElement("div",{className:"EditAvailability__select-grid-container"},function(e){for(var n=[],a=0;a<24;a++)n.push(r.a.createElement(Oe,{key:"".concat(e,"-").concat(a,"-checkbox"),hour:a,handlers:t,dayIndex:e}));return n}(n)))}));return r.a.createElement("div",{className:"EditAvailability__container"},r.a.createElement("h1",{className:"medium-text"},r.a.createElement("span",{className:"EditAvailability__span opacity-wave"},"Editing availability...")),r.a.createElement(pe.a,null,n))},ye=function(e){var t=e.parentHandlers,n=Object(l.c)((function(e){return e})),a=fe(t),c=n.editMode&&"inset";return r.a.createElement("div",{className:"AvailabilityTable__container ".concat(c)},n.editMode&&r.a.createElement(ge,{handlers:t}),!n.editMode&&r.a.createElement("table",{className:"AvailabilityTable__table"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"AvailabilityTable__column-headers"},r.a.createElement("th",null),r.a.createElement("th",null,"Start Time"),r.a.createElement("th",null,"End Time"))),r.a.createElement("tbody",null,a.renderRows())))},De=(n(91),function(e,t){var n=Object(a.useState)({name:"",color:"",availability:{0:[]}}),r=Object(v.a)(n,2),c=r[0],o=r[1],l=Object(a.useState)(null),i=Object(v.a)(l,2),u=i[0],s=i[1],d=t.editMode;return{editMode:d,driverData:c,setDriverData:o,handleToggleEditMode:function(t){t&&t.preventDefault(),u?(o(u),s(null)):s(c),e(ve(!d))},handleColorChange:function(e){e.persist(),o((function(t){return Object(U.a)(Object(U.a)({},t),{},{color:e.target.value})}))},handleUpdateDB:function(t){t.preventDefault(),function(e,t){var n=e.name;g[n]=e,t(g[n])}(c,(function(){e(ve(!1))}))}}}),Se=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e})),n=De(e,t);return Object(a.useEffect)((function(){y(t.driver,(function(e){n.setDriverData(e)}))}),[t.driver]),r.a.createElement("div",null,n.driverData&&r.a.createElement("div",{className:"DriverInfo__container"},r.a.createElement("span",{className:"DriverInfo__label small-text"},"Name"),r.a.createElement("span",null,n.driverData.name),r.a.createElement("span",{className:"DriverInfo__label small-text"},"Color"),n.editMode?r.a.createElement("input",{disabled:!n.editMode,value:n.driverData.color,type:"color",onChange:n.handleColorChange,className:"DriverInfo__color-block pointer_mouse"}):r.a.createElement("div",{style:{background:n.driverData.color},className:"DriverInfo__color-block"}),r.a.createElement("span",{className:"DriverInfo__label small-text"},"Availability"),r.a.createElement("span",null),r.a.createElement(ye,{parentHandlers:n}),r.a.createElement(me,{handlers:n})))},ke=n(25),we={mergeRows:function(e,t){return e.map((function(e,n){var a=Object.values(t[n]);return[e].concat(Object(be.a)(a))}))},weekAndDayMap:function(){for(var e=[],t=0;t<52;t++)for(var n=0;n<7;n++)e.push("".concat(t,"-").concat(n));return e},generateReportForPeriod:function(e,t){var n=function(){var e,t={},n=Object(ke.a)(d);try{for(n.s();!(e=n.n()).done;){t[e.value]=0}}catch(a){n.e(a)}finally{n.f()}return t}();return e.forEach((function(e){for(var a=0;a<24;a++){var r="".concat(e,"-").concat(a),c=E[r];c&&c.driver===t&&(n[c.description]=n[c.description]+1)}})),n},groupByTimeframe:function(e,t){var n=[],a=[];return e.forEach((function(e,r){a.push(e),a.length===t&&(n.push(a),a=[])})),n},generateTimeframeString:function(e){var t=e[0],n=e[e.length-1],a=_(t),r=_(n);return"".concat(a," - ").concat(r)}},Te=function(e){var t,n=[],a=Object(ke.a)(d);try{for(a.s();!(t=a.n()).done;){var c=t.value;n.push(r.a.createElement("td",{key:c},e[c]))}}catch(o){a.e(o)}finally{a.f()}return n},Re={dropdownItems:function(e,t){return e.map((function(e,n){return r.a.createElement(J.a,{key:"".concat(e,"-").concat(n,"-dayRange"),onClick:t&&t},e)}))},dropdownMenu:function(e){return r.a.createElement(X.a,null,e)},tableHeaders:function(){var e=["Time-Frame"].concat(Object(be.a)(d)).map((function(e,t){return r.a.createElement("th",{key:"".concat(e,"-").concat(t,"-report")},e)}));return r.a.createElement("tr",null,e)},tableRows:function(e,t){var n,a=[],c=[],o=0,l=Object(ke.a)(e);try{for(l.s();!(n=l.n()).done;){var i=n.value,u=o%2===0?"positive_tr":"negative_tr",s=t[o];c.push(r.a.createElement("th",{key:"".concat(s,"-").concat(o,"-th"),scope:"row"},s)),c.push(Te(i)),a.push(r.a.createElement("tr",{key:"".concat(o,"-").concat(s,"-tr-rows"),className:u},c)),o++,c=[]}}catch(d){l.e(d)}finally{l.f()}return a}},je=n(105),Ne=function(e){var t=Object(a.useState)("Select"),n=Object(v.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(!1),i=Object(v.a)(l,2),u=i[0],s=i[1],E=we.weekAndDayMap(),f=we.groupByTimeframe(E,c),p=f.map((function(t){return we.generateReportForPeriod(t,e.driver)})),b=f.map((function(e){return we.generateTimeframeString(e)})),h=we.mergeRows(b,p);return{timeFrame:c,cachedCSVdata:function(){return{headers:["Time-Frame"].concat(Object(be.a)(d)),data:h}},handleRenderDropdown:function(){var e=Re.dropdownItems(m,(function(e){return o(parseInt(e.target.innerText))}));return r.a.createElement(ae.a,{isOpen:u,toggle:function(){return s(!u)}},r.a.createElement(Q.a,{caret:!0},c),Re.dropdownMenu(e))},handleRenderTable:function(){return r.a.createElement(je.a,{className:"ReportTable__table-container"},r.a.createElement("thead",{className:"ReportTable__table-headers"},Re.tableHeaders()),r.a.createElement("tbody",null,Re.tableRows(p,b)))}}},Ce=(n(92),n(54)),Ie=function(){var e=Object(l.c)((function(e){return e})),t=Ne(e),n=t.cachedCSVdata(),a=n.data,c=n.headers,o="".concat(e.driver,"_dispatch_report.csv");return r.a.createElement("section",null,r.a.createElement("div",{className:"ReportTable__btns-container"},r.a.createElement("label",null,"Drivers"),r.a.createElement(ue,null),r.a.createElement("label",null,"Day Range"),r.a.createElement("div",null,t.handleRenderDropdown()),e.driver!==s[0]&&"Select"!==t.timeFrame&&r.a.createElement(Ce.CSVLink,{className:"ReportTable__csv-dl-btn",target:"_blank",filename:o,data:a,headers:c},"Download Report")),r.a.createElement("div",{className:"ReportTable__table-wrapper"},e.driver!==s[0]&&"Select"!==t.timeFrame?t.handleRenderTable():r.a.createElement("span",{className:"ReportTable__empty-span medium-text"},"Make a selection to view driver reports.")))},Ae=function(){var e=Object(l.c)((function(e){return e})),t=e.slideInToggled&&"nav-toggled";return r.a.createElement("div",{className:"view-offset ".concat(t)},r.a.createElement(de,null),e.driver!==s[0]?r.a.createElement(Se,null):r.a.createElement("span",{className:"DriversList__empty-span medium-text"},"Make a selection to view driver info."))},Le=function(){var e=Object(l.c)((function(e){return e})).slideInToggled&&"nav-toggled";return r.a.createElement("div",{className:"view-offset ".concat(e)},r.a.createElement(z,null),r.a.createElement(S,null))},Me=function(){var e=Object(l.c)((function(e){return e})).slideInToggled&&"nav-toggled";return r.a.createElement("div",{className:"view-offset ".concat(e)},r.a.createElement(Ie,null))};var Fe=function(){var e=Object(l.c)((function(e){return e}));return r.a.createElement("div",{className:"App"},r.a.createElement(ie,null),r.a.createElement(ee,null),"DRIVERS_VIEW"===e.appView&&r.a.createElement(Ae,null),"SCHEDULE_VIEW"===e.appView&&r.a.createElement(Le,null),"REPORT_VIEW"===e.appView&&r.a.createElement(Me,null))},Ve=(n(96),n(97),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INCREMENT":return e+t.payload;case"DECREMENT":return e-t.payload;default:return e}}),Pe={week:0,day:1,hour:5},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEXT_WEEK":return Object(U.a)(Object(U.a)({},e),{},{week:e.week+1});case"PREV_WEEK":return Object(U.a)(Object(U.a)({},e),{},{week:e.week-1});case"UPDATE_DATE":var n=t.payload,a=n.day,r=n.hour;return Object(U.a)(Object(U.a)({},e),{},{day:a,hour:r});default:return e}},We=s[0],Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DRIVER":return t.payload;default:return e}},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_FORM":return!0;case"CLOSE_FORM":return!1;default:return e}},He={errMsg:null,payload:null},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR":return t.payload;case"RESET_ERROR":return He;default:return e}},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"REPORT_VIEW",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_APP_VIEW":return t.payload;default:return e}},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_SLIDE_IN":return!e;default:return e}},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EDIT_MODE":return t.payload;default:return e}},Xe={showBookableSlots:!1,showOutsideAvailability:!1,showControls:!1},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SHOW_BOOKABLE_SLOTS":return Object(U.a)(Object(U.a)({},e),{},{showBookableSlots:t.payload});case"SET_SHOW_OUTSIDE_AVAILABILITY":return Object(U.a)(Object(U.a)({},e),{},{showOutsideAvailability:t.payload});case"SET_SHOW_CONTROLS":return Object(U.a)(Object(U.a)({},e),{},{showControls:t.payload});case"RESET_FILTERS":return Xe;case"TOGGLE_FILTER_ELEMENT":return Object(U.a)(Object(U.a)({},e),{},Object(P.a)({},t.element,!e[t.element]));default:return e}},qe=n(18),ze=Object(qe.b)({test:Ve,date:Ue,driver:Be,entryForm:xe,error:Ke,appView:Ye,slideInToggled:Ge,editMode:Qe,viewFilters:Je}),Ze=Object(qe.c)(ze,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:Ze},r.a.createElement(Fe,null))),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.434bc415.chunk.js.map